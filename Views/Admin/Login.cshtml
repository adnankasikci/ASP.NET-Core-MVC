<main>
    <section class="w-full h-screen">
        <article class="relative">
            <div class="object-cover w-full h-screen bg-slate-100"></div>
            <div class="absolute top-0 bottom-0 z-10 end-0 start-0">
                <div class="relative flex items-center justify-center w-full h-full text-gray-700">
                    <div class="bg-white w-11/12 md:w-[25rem] p-6 rounded-md shadow-[0px_0px_5px_0px_rgba(0,0,0,.1)]">
                        <h1>@ViewData["Title"]</h1>
                        <p>@ViewData["Message"]</p>
                        <h2 class="text-2xl font-bold tracking-tight">Hoşgeldin! Admin Giriş Yap</h2>
                        <p class="mt-5 text-sm font-normal mb-7">
                            <span class="opacity-50">Normal bir kullanıcı iseniz lütfen </span>
                            <a class="text-blue-600 hover:underline" href="/">anasayfaya</a>
                            <span class="opacity-50"> dönün. Sadece site sahiplerinin kullanabileceği bir
                                giriştir.</span>
                        </p>

                        <form id="loginForm">
                            <div>
                                <label for="username" class="font-semibold">Kullanıcı Adı</label>
                                <div class="relative mt-2">
                                    <input id="username" name="username" type="text" autocomplete="username"
                                        placeholder="Admin kullanıcısını giriniz" required
                                        class="block w-full p-2 border border-black rounded-md sm:text-sm sm:leading-6" />
                                    <div
                                        class="absolute top-0 bottom-0 flex items-center justify-center text-sm right-3">
                                        <i class="fa fa-user"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-4">
                                <label for="password" class="font-semibold">Parola</label>
                                <div class="relative mt-2">
                                    <input id="password" name="password" type="password" autocomplete="current-password"
                                        placeholder="Parolanızı giriniz" required
                                        class="block w-full p-2 border border-black rounded-md sm:text-sm sm:leading-6" />
                                    <div
                                        class="absolute top-0 bottom-0 flex items-center justify-center text-sm right-3">
                                        <i class="fa fa-key"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="mt-8">
                                <button type="submit"
                                    class="block w-full py-2 text-white duration-300 border rounded-md bg-zinc-700 hover:bg-zinc-900">
                                    Giriş Yap
                                </button>
                            </div>
                        </form>


                        <p class="mt-4 text-sm font-medium text-center opacity-25">Yönetim Paneli Admin Girişi</p>
                        <div class="py-2 mt-4 text-xs font-semibold text-center bg-red-200 rounded-md text-rose-900 hidden errorMessage"
                            id="errorMessage">
                            Hatalı Giriş Yaptınız!
                        </div>
                    </div>
                </div>
            </div>

            <div class="absolute bottom-0 flex flex-col items-center justify-center text-black end-0 start-0">
                <div class="text-xs opacity-10">Version 1.0.0</div>
                <div class="mt-3 mb-4 text-xs font-semibold opacity-25 md:pb-10">Admin Panel Yönetimi</div>
            </div>
        </article>
    </section>
</main>


<script type="module">

    import { login, checkTokenValidity } from '/js/api/auth.js';

    document.getElementById("loginForm").addEventListener("submit", function (e) {
        e.preventDefault();
        const username = document.getElementById("username").value;
        const password = document.getElementById("password").value;
        login(username, password)
    });

    var tokenControl = checkTokenValidity();
    if (tokenControl) { window.location.href = "/admin" }

</script>
